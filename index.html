<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Semcas - Almoxarifado e Manutenção</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .tab-active {
            border-color: #4f46e5;
            color: #4f46e5;
            background-color: #eef2ff;
        }
        .view {
            display: none;
        }
        .view-active {
            display: block;
        }
        /* Custom scrollbar for better aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
    </style>
</head>
<body class="bg-slate-100 text-slate-800">

    <div id="app" class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">
        
        <!-- Cabeçalho -->
        <header class="mb-6">
            <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center">
                <div>
                    <h1 class="text-3xl font-bold text-indigo-700">Semcas - Almoxarifado e Manutenção</h1>
                    <p class="mt-1 text-slate-500">Painel de Controle de Estoque em Tempo Real</p>
                </div>
                <div id="last-updated" class="text-sm text-slate-500 mt-2 sm:mt-0"></div>
            </div>
        </header>

        <!-- Navegação por Abas -->
        <nav class="flex flex-wrap border-b border-slate-300">
            <button data-tab="estoque" class="tab py-3 px-4 font-semibold text-slate-600 border-b-2 border-transparent hover:bg-slate-200 transition-colors duration-200">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block mr-2" viewBox="0 0 20 20" fill="currentColor"><path d="M5 8a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1z" /><path fill-rule="evenodd" d="M4 4a2 2 0 012-2h8a2 2 0 012 2v12a1 1 0 11-2 0V4H6v12a1 1 0 11-2 0V4zm5 3a1 1 0 011-1h2a1 1 0 110 2h-2a1 1 0 01-1-1z" clip-rule="evenodd" /></svg>
                Estoque Geral
            </button>
            <button data-tab="minimo" class="tab py-3 px-4 font-semibold text-slate-600 border-b-2 border-transparent hover:bg-slate-200 transition-colors duration-200">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1.75-5.25a1.75 1.75 0 00-3.5 0v.25a1.75 1.75 0 003.5 0v-.25z" clip-rule="evenodd" /></svg>
                Estoque Mínimo
            </button>
            <button data-tab="validade" class="tab py-3 px-4 font-semibold text-slate-600 border-b-2 border-transparent hover:bg-slate-200 transition-colors duration-200">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd" /></svg>
                Controle de Validade
            </button>
            <button data-tab="relatorios" class="tab py-3 px-4 font-semibold text-slate-600 border-b-2 border-transparent hover:bg-slate-200 transition-colors duration-200">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block mr-2" viewBox="0 0 20 20" fill="currentColor"><path d="M2 11a1 1 0 011-1h2a1 1 0 110 2H3a1 1 0 01-1-1zm5 0a1 1 0 011-1h5a1 1 0 110 2H8a1 1 0 01-1-1zm5 0a1 1 0 011-1h2a1 1 0 110 2h-2a1 1 0 01-1-1z" /></svg>
                Relatórios
            </button>
        </nav>

        <main id="content-area" class="bg-white rounded-b-lg shadow-lg p-6 min-h-[60vh]">
            
            <!-- Loader -->
            <div id="loader" class="flex justify-center items-center h-64">
                <div class="animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-indigo-500"></div>
            </div>

            <!-- Mensagem de Erro (para erros críticos) -->
            <div id="error-message" class="hidden text-center text-red-600 bg-red-100 p-4 rounded-lg"></div>

            <!-- Conteúdo das Abas -->
            <div id="estoque-view" class="view"></div>
            <div id="minimo-view" class="view"></div>
            <div id="validade-view" class="view"></div>
            <div id="relatorios-view" class="view"></div>
        </main>
    </div>

    <script type="module">
        // --- CONFIGURAÇÕES ---
        const SPREADSHEET_ID = '2PACX-1vSq5-5mNONPvPSFwcvqXl3u5ClieB-tTk6WDCe0Rtzk87zgFMb6YaaMe2s3m0eTYXKa1mp_Gyo8w7er';
        const ESTOQUE_GID = '0'; // GID da aba "Estoque", geralmente 0 para a primeira
        
        // !!! ======================================================================= !!!
        // !!!                     ATENÇÃO: AÇÃO OBRIGATÓRIA AQUI                      !!!
        // !!! ======================================================================= !!!
        // !!! O painel NÃO FUNCIONARÁ CORRETAMENTE até que você atualize o GID abaixo.!!!
        // !!! O GID é o número de identificação da sua aba "Envio".                    !!!
        // !!!                                                                         !!!
        // !!!    COMO ENCONTRAR E CORRIGIR:                                           !!!
        // 1. Abra sua planilha no Google Sheets.                                     !!!
        // 2. Clique na aba/página chamada "Envio".                                   !!!
        // 3. Olhe o link (URL) no seu navegador. Será algo como:                     !!!
        //    https://docs.google.com/spreadsheets/d/..../edit#gid=123456789          !!!
        // 4. Copie APENAS O NÚMERO do final (neste exemplo, 123456789).              !!!
        // 5. Cole o número abaixo, substituindo o '1451380922' de exemplo.          !!!
        // !!! ======================================================================= !!!
        const ENVIO_GID = '812966811'; // <<< SUBSTITUA O NÚMERO AQUI, DENTRO DAS ASPAS!
        
        const MIN_STOCK_THRESHOLD = 10;
        const EXPIRATION_THRESHOLD_DAYS = 30;

        const ESTOQUE_URL = `https://docs.google.com/spreadsheets/d/e/${SPREADSHEET_ID}/pub?output=csv&gid=${ESTOQUE_GID}`;
        const ENVIO_URL = ENVIO_GID ? `https://docs.google.com/spreadsheets/d/e/${SPREADSHEET_ID}/pub?output=csv&gid=${ENVIO_GID}` : '';

        // --- ESTADO DA APLICAÇÃO ---
        let state = {
            activeTab: 'estoque',
            inventoryData: [],
            categories: [],
            filters: {
                searchTerm: '',
                category: 'all'
            }
        };

        // --- ELEMENTOS DO DOM ---
        const dom = {
            app: document.getElementById('app'),
            loader: document.getElementById('loader'),
            errorMessage: document.getElementById('error-message'),
            tabs: document.querySelectorAll('.tab'),
            contentArea: document.getElementById('content-area'),
            lastUpdated: document.getElementById('last-updated'),
        };

        // --- FUNÇÕES AUXILIARES ---
        const parseCSV = (csvText) => {
            if (!csvText) return [];
            const lines = csvText.trim().split('\n');
            const headers = lines[0].split(',').map(h => h.trim().replace(/"/g, ''));
            const data = [];

            for (let i = 1; i < lines.length; i++) {
                if (lines[i].trim() === '') continue;
                
                const values = lines[i].split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);

                if (values.length === headers.length) {
                    let row = {};
                    headers.forEach((header, index) => {
                        row[header] = values[index].trim().replace(/^"|"$/g, '');
                    });
                    
                    row['Quantidade'] = parseInt(row['Quantidade']) || 0;
                    row['Valor Unitário'] = parseFloat(row['Valor Unitário']?.replace('R$', '').replace(',', '.')) || 0;
                    row['Valor Total'] = parseFloat(row['Valor Total']?.replace('R$', '').replace(',', '.')) || 0;
                    data.push(row);
                } else {
                     console.warn(`Pulando linha CSV mal formatada ${i + 1}:`, lines[i]);
                }
            }
            return data;
        };

        const formatDate = (dateString) => {
            if (!dateString || !/^\d{2}\/\d{2}\/\d{4}$/.test(dateString)) return 'N/A';
            const [day, month, year] = dateString.split('/');
            return new Date(`${year}-${month}-${day}`);
        };

        const formatCurrency = (value) => {
            return new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(value || 0);
        };
        
        // --- FUNÇÕES DE RENDERIZAÇÃO ---
        const render = () => {
            dom.tabs.forEach(tab => {
                tab.classList.toggle('tab-active', tab.dataset.tab === state.activeTab);
            });
            document.querySelectorAll('.view').forEach(view => {
                view.classList.toggle('view-active', view.id.startsWith(state.activeTab));
            });

            switch (state.activeTab) {
                case 'estoque':
                    renderInventoryView();
                    break;
                case 'minimo':
                    renderMinStockView();
                    break;
                case 'validade':
                    renderExpirationView();
                    break;
                case 'relatorios':
                    renderReportsView();
                    break;
            }
        };

        const createFiltersHTML = () => {
            return `
                <div class="flex flex-col sm:flex-row gap-4 mb-4">
                    <input type="text" id="search-input" placeholder="Buscar por produto ou código..." class="w-full sm:w-1/2 p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                    <select id="category-select" class="w-full sm:w-1/2 p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                        <option value="all">Todas as Categorias</option>
                        ${state.categories.map(cat => `<option value="${cat}">${cat}</option>`).join('')}
                    </select>
                </div>
            `;
        };
        
        const createTableHTML = (data, columns) => {
            if (data.length === 0) {
                return '<p class="text-center text-slate-500 py-8">Nenhum item encontrado.</p>';
            }
            return `
                <div class="overflow-x-auto rounded-lg border border-slate-200">
                    <table class="w-full text-sm text-left text-slate-500">
                        <thead class="text-xs text-slate-700 uppercase bg-slate-100">
                            <tr>
                                ${columns.map(col => `<th scope="col" class="px-6 py-3">${col.header}</th>`).join('')}
                            </tr>
                        </thead>
                        <tbody>
                            ${data.map(item => `
                                <tr class="bg-white border-b hover:bg-slate-50 ${item.rowClass || ''}">
                                    ${columns.map(col => `<td class="px-6 py-4 ${col.class || ''}">${col.render(item)}</td>`).join('')}
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            `;
        };

        const getFilteredData = () => {
            return state.inventoryData.filter(item => {
                const searchTerm = state.filters.searchTerm.toLowerCase();
                const category = state.filters.category;
                const matchesSearch = item['Produto']?.toLowerCase().includes(searchTerm) || item['Código']?.toLowerCase().includes(searchTerm);
                const matchesCategory = category === 'all' || item['Categoria'] === category;
                return matchesSearch && matchesCategory;
            });
        };

        const addFilterEventListeners = () => {
            document.getElementById('search-input')?.addEventListener('input', (e) => {
                state.filters.searchTerm = e.target.value;
                render();
            });
            document.getElementById('category-select')?.addEventListener('change', (e) => {
                state.filters.category = e.target.value;
                render();
            });
        };

        // RENDERIZAÇÃO DAS ABAS
        const renderInventoryView = () => {
            const view = document.getElementById('estoque-view');
            const data = getFilteredData();
            const columns = [
                { header: 'Código', render: item => item['Código'] || 'N/A' },
                { header: 'Produto', render: item => item['Produto'] || 'N/A', class: 'font-semibold text-slate-800' },
                { header: 'Categoria', render: item => item['Categoria'] || 'N/A' },
                { header: 'Quantidade', render: item => item['Quantidade'], class: 'text-center font-bold' },
                { header: 'Unidade', render: item => item['Unidade'] || 'N/A' },
                { header: 'Valor Unitário', render: item => formatCurrency(item['Valor Unitário']) },
                { header: 'Valor Total', render: item => formatCurrency(item['Valor Total']) },
                { header: 'Data de Validade', render: item => item['Data de Validade'] || 'N/A' }
            ];
            view.innerHTML = createFiltersHTML() + createTableHTML(data, columns);
            addFilterEventListeners();
        };
        
        const renderMinStockView = () => {
            const view = document.getElementById('minimo-view');
            const filtered = getFilteredData();
            const data = filtered.filter(item => item['Quantidade'] <= MIN_STOCK_THRESHOLD);
             const columns = [
                { header: 'Código', render: item => item['Código'] || 'N/A' },
                { header: 'Produto', render: item => item['Produto'] || 'N/A', class: 'font-semibold text-slate-800' },
                { header: 'Categoria', render: item => item['Categoria'] || 'N/A' },
                { header: 'Quantidade', render: item => `<span class="bg-red-100 text-red-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${item['Quantidade']}</span>`, class: 'text-center font-bold' },
                { header: 'Unidade', render: item => item['Unidade'] || 'N/A' },
            ];
            view.innerHTML = `
                <div class="p-4 mb-4 text-sm text-yellow-800 rounded-lg bg-yellow-50" role="alert">
                    <span class="font-medium">Atenção!</span> Itens com quantidade igual ou inferior a ${MIN_STOCK_THRESHOLD}.
                </div>
            ` + createFiltersHTML() + createTableHTML(data, columns);
            addFilterEventListeners();
        };

        const renderExpirationView = () => {
            const view = document.getElementById('validade-view');
            const today = new Date();
            today.setHours(0,0,0,0);
            
            const filtered = getFilteredData();
            const data = filtered
                .map(item => {
                    const expiryDate = formatDate(item['Data de Validade']);
                    if (!expiryDate || isNaN(expiryDate)) return { ...item, daysToExpire: Infinity, status: 'ok' };

                    const diffTime = expiryDate - today;
                    const daysToExpire = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                    
                    let status = 'ok';
                    let rowClass = '';
                    if (daysToExpire < 0) {
                        status = 'Vencido';
                        rowClass = 'bg-red-50 text-red-900';
                    } else if (daysToExpire <= EXPIRATION_THRESHOLD_DAYS) {
                        status = 'Vence em breve';
                        rowClass = 'bg-yellow-50 text-yellow-900';
                    }
                    
                    return { ...item, daysToExpire, status, rowClass };
                })
                .filter(item => item.status !== 'ok')
                .sort((a, b) => a.daysToExpire - b.daysToExpire);

            const columns = [
                { header: 'Produto', render: item => item['Produto'] || 'N/A', class: 'font-semibold' },
                { header: 'Data de Validade', render: item => item['Data de Validade'] || 'N/A' },
                { header: 'Status', render: item => {
                    if(item.status === 'Vencido') return `<span class="bg-red-200 text-red-900 px-2 py-1 rounded-full text-xs font-bold">${item.status}</span>`;
                    if(item.status === 'Vence em breve') return `<span class="bg-yellow-200 text-yellow-900 px-2 py-1 rounded-full text-xs font-bold">${item.status} (${item.daysToExpire} dias)</span>`;
                    return '';
                 }
                },
                { header: 'Quantidade', render: item => item['Quantidade'], class: 'text-center font-bold' },
            ];

            view.innerHTML = `
                <div class="p-4 mb-4 text-sm text-blue-800 rounded-lg bg-blue-50" role="alert">
                    Mostrando itens vencidos ou que irão vencer nos próximos <span class="font-medium">${EXPIRATION_THRESHOLD_DAYS} dias</span>.
                </div>
            ` + createFiltersHTML() + createTableHTML(data, columns);
            addFilterEventListeners();
        };
        
        const renderReportsView = () => {
            const view = document.getElementById('relatorios-view');
            const totalValue = state.inventoryData.reduce((sum, item) => sum + (item['Valor Total'] || 0), 0);
            const totalItems = state.inventoryData.reduce((sum, item) => sum + item['Quantidade'], 0);
            const lowStockItems = state.inventoryData.filter(item => item['Quantidade'] <= MIN_STOCK_THRESHOLD).length;
            const expiringItems = state.inventoryData.filter(item => {
                 const expiryDate = formatDate(item['Data de Validade']);
                 if (!expiryDate || isNaN(expiryDate)) return false;
                 const diffTime = expiryDate - new Date();
                 const daysToExpire = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                 return daysToExpire > 0 && daysToExpire <= EXPIRATION_THRESHOLD_DAYS;
            }).length;

            const itemsByCategory = state.inventoryData.reduce((acc, item) => {
                const category = item['Categoria'] || 'Sem Categoria';
                acc[category] = (acc[category] || 0) + item['Quantidade'];
                return acc;
            }, {});
            const maxCategoryValue = Math.max(1, ...Object.values(itemsByCategory)); // Evita divisão por zero

            view.innerHTML = `
                <!-- Cards de KPI -->
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="bg-slate-50 p-6 rounded-lg shadow">
                        <h3 class="text-sm font-medium text-slate-500">Valor Total do Estoque</h3>
                        <p class="mt-2 text-3xl font-bold text-indigo-600">${formatCurrency(totalValue)}</p>
                    </div>
                    <div class="bg-slate-50 p-6 rounded-lg shadow">
                        <h3 class="text-sm font-medium text-slate-500">Total de Itens</h3>
                        <p class="mt-2 text-3xl font-bold text-indigo-600">${totalItems.toLocaleString('pt-BR')}</p>
                    </div>
                    <div class="bg-slate-50 p-6 rounded-lg shadow">
                        <h3 class="text-sm font-medium text-slate-500">Itens com Estoque Baixo</h3>
                        <p class="mt-2 text-3xl font-bold text-yellow-600">${lowStockItems}</p>
                    </div>
                    <div class="bg-slate-50 p-6 rounded-lg shadow">
                        <h3 class="text-sm font-medium text-slate-500">Itens Vencendo em Breve</h3>
                        <p class="mt-2 text-3xl font-bold text-orange-600">${expiringItems}</p>
                    </div>
                </div>

                <!-- Gráfico de Categorias -->
                <div class="bg-white p-6 rounded-lg shadow">
                    <h3 class="text-lg font-semibold mb-4">Quantidade de Itens por Categoria</h3>
                    <div class="space-y-4">
                        ${Object.entries(itemsByCategory).sort(([,a],[,b]) => b-a).map(([category, count]) => `
                            <div class="w-full">
                                <div class="flex justify-between mb-1">
                                    <span class="text-sm font-medium text-slate-700">${category}</span>
                                    <span class="text-sm font-medium text-slate-500">${count} itens</span>
                                </div>
                                <div class="w-full bg-slate-200 rounded-full h-4">
                                    <div class="bg-indigo-500 h-4 rounded-full" style="width: ${(count / maxCategoryValue) * 100}%"></div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        };

        // --- INICIALIZAÇÃO E EVENTOS ---
        const init = async () => {
            try {
                const fetchSheet = async (url, sheetName) => {
                    try {
                        const response = await fetch(url);
                        if (!response.ok) {
                            throw new Error(`A resposta para a aba "${sheetName}" falhou (status: ${response.status}). Verifique se o GID para esta aba está correto e se ela foi publicada na web como CSV.`);
                        }
                        return response.text();
                    } catch (networkError) {
                        console.error(`Erro de rede ao buscar a aba "${sheetName}":`, networkError);
                        throw new Error(`Não foi possível conectar à aba "${sheetName}". Verifique sua conexão com a internet ou um possível bloqueio de rede (CORS).`);
                    }
                };

                const promises = [fetchSheet(ESTOQUE_URL, 'Estoque')];
                if (ENVIO_URL) {
                    promises.push(fetchSheet(ENVIO_URL, 'Envio'));
                }
                
                const results = await Promise.allSettled(promises);

                const estoqueResult = results[0];
                if (estoqueResult.status === 'rejected') {
                    throw estoqueResult.reason;
                }
                const estoqueCsv = estoqueResult.value;
                
                let envioCsv = '';
                const envioResult = results[1];
                if (envioResult) {
                    if (envioResult.status === 'rejected') {
                        console.warn('Falha ao carregar dados de "Envio":', envioResult.reason.message);
                        const warningDiv = document.createElement('div');
                        warningDiv.className = 'p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-100';
                        warningDiv.setAttribute('role', 'alert');
                        warningDiv.innerHTML = `
                            <h3 class="font-bold text-lg mb-2">AÇÃO NECESSÁRIA: Falha ao carregar a aba "Envio"</h3>
                            <p>O painel não consegue se conectar à sua aba "Envio" porque o GID (número de identificação) no código está incorreto. Por isso, o cálculo de saídas do estoque não está funcionando.</p>
                            <p class="mt-2"><strong>COMO CORRIGIR:</strong></p>
                            <ol class="list-decimal list-inside mt-1 space-y-1">
                                <li>Abra o arquivo <strong>index.html</strong> que você está usando.</li>
                                <li>Procure pela variável chamada <strong>ENVIO_GID</strong> (há um grande comentário de aviso acima dela).</li>
                                <li>Substitua o número de exemplo (<strong>'${ENVIO_GID}'</strong>) pelo GID correto da sua planilha.</li>
                            </ol>
                            <p class="mt-2">Você encontra o GID correto no final do link ao clicar na sua aba "Envio" na planilha.</p>
                        `;
                        dom.contentArea.prepend(warningDiv);
                    } else {
                        envioCsv = envioResult.value;
                    }
                }

                const initialStock = parseCSV(estoqueCsv);
                const sentItems = envioCsv ? parseCSV(envioCsv) : [];

                const sentItemsMap = sentItems.reduce((map, item) => {
                    const key = item['Código'];
                    if (key) {
                        map[key] = (map[key] || 0) + (item['Quantidade'] || 0);
                    }
                    return map;
                }, {});

                const currentStock = initialStock.map(item => {
                    const sentQuantity = sentItemsMap[item['Código']] || 0;
                    const currentQuantity = item['Quantidade'] - sentQuantity;
                    const newTotalValue = currentQuantity * item['Valor Unitário'];
                    return {
                        ...item,
                        'Quantidade': currentQuantity,
                        'Valor Total': newTotalValue
                    };
                });

                state.inventoryData = currentStock;
                state.categories = [...new Set(state.inventoryData.map(item => item['Categoria']).filter(Boolean))];
                
                dom.loader.style.display = 'none';
                dom.lastUpdated.textContent = `Atualizado em: ${new Date().toLocaleString('pt-BR')}`;
                render();

            } catch (error) {
                console.error(error);
                dom.loader.style.display = 'none';
                dom.errorMessage.textContent = error.message; 
                dom.errorMessage.style.display = 'block';
            }
        };

        dom.tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                state.activeTab = tab.dataset.tab;
                render();
            });
        });

        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>


